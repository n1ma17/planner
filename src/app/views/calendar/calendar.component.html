<div class="calendar-container">
 
    <form class="calendar-form">
      <mat-form-field class="example-full-width">
        <mat-label>title</mat-label>
        <input
          [formControl]="title"
          matInput
          value="Sushi"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Choose a date</mat-label>
        <input [formControl]="startDate" matInput [matDatepicker]="picker" />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <button mat-flat-button color="primary" (click)="create()">
        Create Apointment
      </button>
    </form>

  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>month</mat-label>
    <input
      type="text"
      placeholder="Pick one"
      aria-label="months"
      matInput
      [formControl]="controller"
      [value]="controller.value?.name"
      [matAutocomplete]="auto"
    />
    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
      <mat-option *ngFor="let option of months" [value]="option">
        {{ option.name }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
  <div class="calendar">
    <div class="calendar__hours">
      <div class="days"></div>
      <div
        *ngFor="let i of [].constructor(23); index as index"
        class="calendar__hours__card"
      >
        {{ index + 1 }} {{ index < 12 ? "am" : "pm" }}
      </div>
    </div>
    <div
      class="calendar__column"
      *ngFor="let day of [].constructor(controller.value?.days); index as index"
    >
      <mat-card class="days">
        <mat-card-header>
          <mat-card-subtitle>{{ index + 1 }}</mat-card-subtitle>
          <mat-card-title>{{ controller.value?.name }}</mat-card-title>
        </mat-card-header>
      </mat-card>
      <mat-card
        cdkDrag
        (cdkDragReleased)="onDraged($event, apointment)"
        class="calendar__column__apointment"
        *ngFor="let apointment of getApointments(index)"
        [style]="calcTop(apointment)"
      >
        <!-- <mat-card-header>
          <p>{{ apointment.title }}</p>
        </mat-card-header> -->
        <mat-card-content>
          <div class="apointment-content">
            <span>{{ apointment.start.toLocaleString() }}</span>
            <button
              mat-button
              color="warn"
              (click)="removeApointment(apointment)"
            >
              Delete
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
